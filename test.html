<html>
<head>
<style>
body, input, button {
    font-size: 30px;
}
</style>    
</head>
<body>
<canvas id="canvas" width="1000" height="1000" style="border:1px #000 solid;"></canvas>
<script src="jscolor.min.js"></script>

<br>
Color: <input id="picker" class="jscolor" value="ab2567" onchange="updateColor(this.value)"><br>
<button style="background:#a0a0a0" onclick="setColor(this.innerHTML)">a0a0a0</button>
<button style="background:#56A08A" onclick="setColor(this.innerHTML)">56A08A</button>
<button style="background:#867AA0" onclick="setColor(this.innerHTML)">867AA0</button>
<button style="background:#A0887D" onclick="setColor(this.innerHTML)">A0887D</button>
<button style="background:#A0868E" onclick="setColor(this.innerHTML)">A0868E</button>
<br>

Width: <input id="width" value="10" onchange="updateWidth(this.value)"><br>
<button onclick="updateWidth(this.innerHTML)">10</button>
<button onclick="updateWidth(this.innerHTML)">25</button>
<button onclick="updateWidth(this.innerHTML)">50</button>
<button onclick="updateWidth(this.innerHTML)">100</button>
<br>
Alpha: <input id="alpha" value=".5" onchange="updateAlpha(this.value)"><br>
<button onclick="updateAlpha(this.innerHTML)">.01</button>
<button onclick="updateAlpha(this.innerHTML)">.02</button>
<button onclick="updateAlpha(this.innerHTML)">.05</button>
<button onclick="updateAlpha(this.innerHTML)">1</button>
<br>
</body>
<script>
// based on http://stackoverflow.com/a/17359298/738675

document.onselectstart = function(){ return false; };
var c = document.getElementById("canvas");
var x = 0;
var y = 0;
var lastX;
var lastY;
var color = "ffffff";
var colorRGB = {r: 100, g: 100, b: 100};
var alpha = .5;

function updateColor(val) {
    console.log('updateColor')
    valRGB = hexToRgb(val);
    colorRGB = {r: valRGB.r, g: valRGB.g, b: valRGB.b};
    document.getElementById("picker").value = val;
}
function setColor(val) {
    document.getElementById('picker').jscolor.fromString(val);
    updateColor(val);
}
function updateWidth(val) {
    w = val;
    document.getElementById("width").value = val;
}
function updateAlpha(val) {
    alpha = val;
    document.getElementById("alpha").value = val;
}

function hexToRgb(hex) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
    } : null;
}

function draw(x,y,w,r,g,b,a){
        var gradient = ctx.createRadialGradient(x, y, 0, x, y, w);
        gradient.addColorStop(0, 'rgba('+r+', '+g+', '+b+', '+a+')');
        gradient.addColorStop(1, 'rgba('+r+', '+g+', '+b+', 0)');
        
        ctx.beginPath();
        ctx.arc(x, y, w, 0, 2 * Math.PI);
        ctx.fillStyle = gradient;
        ctx.fill();
        ctx.closePath();
};
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var w = 10;
var radius = w/2;
var going = false;
c.addEventListener("mousedown", function(e){
    going = true;
    lastX = e.offsetX;
    lastY = e.offsetY;
    draw(lastX, lastY,w,colorRGB.r,colorRGB.g,colorRGB.b, alpha);
});
c.addEventListener("mouseup", function(){
    going = false;
});
c.addEventListener("mousemove", function(e){
    if(going == true){
        x = e.offsetX;
        y = e.offsetY;
        
        // the distance the mouse has moved since last mousemove event
        var dis = Math.sqrt(Math.pow(lastX-x, 2)+Math.pow(lastY-y, 2));
        
        // for each pixel distance, draw a circle on the line connecting the two points
        // to get a continous line.
        for (i=0;i<dis;i+=1) {
            var s = i/dis;
            draw(lastX*s + x*(1-s), lastY*s + y*(1-s),w,colorRGB.r,colorRGB.g,colorRGB.b, alpha);
        }
        lastX = x;
        lastY = y;
    };
});
updateColor(document.getElementById("picker").value);
updateWidth(document.getElementById("width").value);
updateAlpha(document.getElementById("alpha").value);
</script>
</html>